<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Soccorso - Sistema di Emergenza</title>
     <link rel="stylesheet" href="css/home.css" />
</head>
<body>
    <div class="dashboard">
        <h1>🚨 Dashboard Sistema di Soccorso</h1>
        
        <div class="sections">
            <!-- Sezione Richieste di Soccorso -->
            <div class="section">
                <h2>📋 Gestione Richieste di Soccorso</h2>
                <div class="button-grid">
                    <button class="btn" id="btn-insert-request">
                        <span class="icon">🆘</span>
                        Inserimento Richiesta di Soccorso
                    </button>
                    <button class="btn" id="btn-validate-request">
                        <span class="icon">✅</span>
                        Convalida Richiesta di Soccorso
                    </button>
                    <button class="btn" id="btn-list-requests">
                        <span class="icon">📊</span>
                        Lista Richieste (Filtrate)
                    </button>
                    <button class="btn" id="btn-list-unsuccessful">
                        <span class="icon">⚠️</span>
                        Richieste Non Totalmente Positive
                    </button>
                    <button class="btn" id="btn-cancel-request">
                        <span class="icon">❌</span>
                        Annullamento Richiesta (Admin)
                    </button>
                    <button class="btn" id="btn-request-details">
                        <span class="icon">🔍</span>
                        Dettagli Richiesta di Soccorso
                    </button>
                </div>
            </div>

            <!-- Sezione Operatori -->
            <div class="section">
                <h2>👥 Gestione Operatori</h2>
                <div class="button-grid">
                    <button class="btn" id="btn-list-free-operators">
                        <span class="icon">🟢</span>
                        Lista Operatori Liberi
                    </button>
                    <button class="btn" id="btn-operator-details">
                        <span class="icon">👤</span>
                        Dettagli Operatore
                    </button>
                    <button class="btn" id="btn-operator-missions">
                        <span class="icon">📝</span>
                        Missioni dell'Operatore
                    </button>
                </div>
            </div>

            <!-- Sezione Missioni -->
            <div class="section">
                <h2>🎯 Gestione Missioni</h2>
                <div class="button-grid">
                    <button class="btn" id="btn-create-mission">
                        <span class="icon">➕</span>
                        Creazione Missione
                    </button>
                    <button class="btn" id="btn-close-mission">
                        <span class="icon">🏁</span>
                        Chiusura Missione in Corso
                    </button>
                    <button class="btn" id="btn-mission-details">
                        <span class="icon">📋</span>
                        Dettagli Missione
                    </button>
                </div>
            </div>
        </div>

        <!-- Bottone di Logout -->
        <div class="logout-section" style="text-align: center; margin-top: 30px;">
             <button class="btn" type="button" id="logoutBtn">
                <span class="icon">🚪</span>
                Logout
            </button>
        </div>
    </div>

    <!-- MODALE PER INSERIMENTO RICHIESTA -->
    <div id="modalRichiesta" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🆘 Nuova Richiesta di Soccorso</h2>
                <span class="close" id="closeModal">&times;</span>
            </div>
            
            <form id="formRichiesta">
                <div class="form-group">
                    <label for="richiedente">Nome del Richiedente:</label>
                    <input type="text" id="richiedente" name="richiedente" required>
                </div>

                <div class="form-group">
                    <label for="descrizione">Descrizione dell'Emergenza: *</label>
                    <textarea id="descrizione" name="descrizione" rows="4" required 
                              placeholder="Descrivere dettagliatamente l'emergenza..."></textarea>
                </div>

                <div class="form-group">
                    <label for="indirizzo">Indirizzo dell'Emergenza: *</label>
                    <input type="text" id="indirizzo" name="indirizzo" required 
                           placeholder="Via, Numero Civico, Città">
                </div>

                <div class="form-group">
                    <label for="telefono">Telefono di Contatto:</label>
                    <input type="tel" id="telefono" name="telefono" 
                           placeholder="es. 3331234567" pattern="[0-9]{10}">
                </div>

                <div class="form-group">
                    <label for="email">Email di Contatto:</label>
                    <input type="email" id="email" name="email" 
                           placeholder="esempio@email.com">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancellaRichiesta">
                        Annulla
                    </button>
                    <button type="submit" class="btn-primary" id="confermaRichiesta">
                        🆘 Invia Richiesta
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODALE PER LISTA RICHIESTE -->
    <div id="modalListaRichieste" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>📊 Lista Richieste di Soccorso</h2>
                <span class="close" id="closeModalLista">&times;</span>
            </div>

            <!-- Filtri -->
            <div class="filters-section">
                <div class="filter-group">
                    <label for="filtroStato">Stato:</label>
                    <select id="filtroStato">
                        <option value="">Tutti gli stati</option>
                        <option value="PENDING_VALIDATION">In Attesa di Convalida</option>
                        <option value="ATTIVA">Attiva</option>
                        <option value="IN_CORSO">In Corso</option>
                        <option value="CHIUSA">Chiusa</option>
                        <option value="IGNORATA">Ignorata</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="filtroData">Periodo:</label>
                    <select id="filtroData">
                        <option value="">Tutte</option>
                        <option value="oggi">Oggi</option>
                        <option value="settimana">Ultima settimana</option>
                        <option value="mese">Ultimo mese</option>
                    </select>
                </div>

                <div class="filter-group">
                    <button id="applicaFiltri" class="btn-filter">🔍 Cerca</button>
                    <button id="resetFiltri" class="btn-filter btn-secondary">🔄 Reset</button>
                </div>
            </div>

            <!-- Loading e messaggi -->
            <div id="loadingRichieste" class="loading-message" style="display: none;">
                <p>🔄 Caricamento richieste...</p>
            </div>

            <div id="noRichieste" class="no-data-message" style="display: none;">
                <p>📭 Nessuna richiesta trovata con i filtri applicati</p>
            </div>

            <!-- Tabella richieste -->
            <div id="tabellaRichieste" class="table-container">
                <table class="richieste-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Richiedente</th>
                            <th>Descrizione</th>
                            <th>Indirizzo</th>
                            <th>Stato</th>
                            <th>Data Creazione</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="bodyTabellaRichieste">
                        <!-- Le righe verranno inserite via JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Paginazione -->
            <div id="paginazione" class="pagination-container">
                <div class="pagination-info">
                    <span id="infoPaginazione">Showing 0 of 0 results</span>
                </div>
                <div class="pagination-controls">
                    <button id="btnPrimaPagina" class="btn-page">⏮️</button>
                    <button id="btnPaginaPrecedente" class="btn-page">⬅️</button>
                    <span id="numeroPagina">Pagina 1 di 1</span>
                    <button id="btnPaginaSuccessiva" class="btn-page">➡️</button>
                    <button id="btnUltimaPagina" class="btn-page">⏭️</button>
                </div>
                <div class="page-size-selector">
                    <label for="pageSize">Elementi per pagina:</label>
                    <select id="pageSize">
                        <option value="10">10</option>
                        <option value="25" selected>25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    
  <!-- MODALE PER CREAZIONE MISSIONE -->
<div id="modalCreazioneMissione" class="modal">
    <div class="modal-content" style="width: 90%; max-width: 1000px;">
        <div class="modal-header">
            <h2>➕ Seleziona Richiesta per creare una Missione</h2>
            <span class="close" id="closeModalMissione">&times;</span>
        </div>

        <!-- RIGA CON TRE CAMPI AFFIANCATI -->
        <div class="form-row" style="display: flex; gap: 20px; padding: 20px;">
            <!-- Campo richieste -->
            <div class="form-group" style="flex: 1;">
                <label for="selectRichiesta">Richieste ATTIVE:</label>
                <select id="selectRichiesta" required>
                    <option value="">Seleziona una richiesta</option>
                </select>
            </div>

            <!-- Campo Autista -->
            <div class="form-group" style="flex: 1;">
                <label for="selectAutista">Autista LIBERO:</label>
                <select id="selectAutista" required>
                    <option value="">Seleziona un autista</option>
                </select>
            </div>

            <!-- Campo Caposquadra -->
            <div class="form-group" style="flex: 1;">
                <label for="selectCaposquadra">Caposquadra LIBERO:</label>
                <select id="selectCaposquadra" required>
                    <option value="">Seleziona un caposquadra</option>
                </select>
            </div>
        </div>

        <!-- Azioni -->
        <div class="form-actions">
            <button class="btn-primary" id="creaMissione">Crea Missione</button>
        </div>
    </div>
</div>
  
  
  
 <!-- MODALE CHIUSURA MISSIONE -->
<div id="modalChiudiMissione" class="modal">
  <div class="modal-content" style="width: 80%; max-width: 600px;">
    <div class="modal-header">
      <h2>🏁 Chiudi Missione</h2>
      <span class="close" id="closeModalChiudi">&times;</span>
    </div>

    <div class="form-group" style="padding:20px">
      <label for="selectMissioneOpen">Missioni APERTE:</label>
      <select id="selectMissioneOpen">
        <option value="">Caricamento…</option>
      </select>
    </div>

    <div class="form-actions">
      <button class="btn-primary" id="btn-conferma-chiusura">Chiudi</button>
    </div>
  </div>
</div>
 
 <!-- MODALE LISTA OPERATORI LIBERI -->
<div id="modalListaOperatoriLiberi" class="modal" style="display:none;">
  <div class="modal-content" style="width: 80%; max-width: 600px;">
    <div class="modal-header">
      <h2>👥 Lista Operatori Liberi</h2>
      <span class="close" id="closeModalOperatoriLiberi">&times;</span>
    </div>
    <div class="modal-body" style="max-height:400px; overflow-y:auto;">
      <table id="tabellaOperatoriLiberi" border="1" cellpadding="5" cellspacing="0" style="width:100%; border-collapse:collapse;">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Cognome</th>
            <th>Ruolo</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="4">Caricamento...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
 
 
 <!-- MODALE DETTAGLI OPERATORI -->
<div id="modalDettagliOperatori" class="modal" style="display:none;">
  <div class="modal-content" style="width: 90%; max-width: 800px;">
    <div class="modal-header">
      <h2>👤 Dettagli Operatori</h2>
      <span class="close" id="closeModalDettagliOperatori">&times;</span>
    </div>
    <div class="modal-body" style="max-height: 500px; overflow-y: auto;">
      <table id="tabellaDettagliOperatori" border="1" cellpadding="5" cellspacing="0" style="width: 100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Cognome</th>
            <th>Ruolo</th>
            <th>Disponibile</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="5">Caricamento...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
 
 
 
 <!-- MODALE MISSIONI OPERATORE -->
<div id="modalMissioniOperatore" class="modal" style="display:none;">
  <div class="modal-content" style="width: 80%; max-width: 700px;">
    <div class="modal-header">
      <h2>📝 Missioni Operatore</h2>
      <span class="close" id="closeModalMissioniOperatore">&times;</span>
    </div>
    <div class="modal-body" style="padding: 20px;">
      <label for="selectOperatoreMissioni">Seleziona Operatore:</label>
      <select id="selectOperatoreMissioni" style="width: 100%; margin-bottom: 15px;">
        <option value="">Caricamento...</option>
      </select>

      <table id="tabellaMissioniOperatore" border="1" cellpadding="5" cellspacing="0" style="width:100%; border-collapse:collapse; display:none;">
        <thead>
          <tr>
            <th>ID Missione</th>
            <th>Request ID</th>
            <th>Status</th>
            <th>Data Creazione</th>
          </tr>
        </thead>
        <tbody>
          <!-- Missioni inserite qui -->
        </tbody>
      </table>
      <div id="noMissioniMsg" style="display:none; margin-top: 10px;">Nessuna missione trovata per questo operatore.</div>
    </div>
  </div>
</div>





    
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="javascript/logica-home.js"></script>
    
</body>
</html>